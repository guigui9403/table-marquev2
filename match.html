
<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <title>Feuille de Match Ultra</title>
  <style>
    body { font-family: Arial, sans-serif; margin: 0; padding: 20px; background: #f0f0f0; }
    h1 { text-align: center; margin-bottom: 20px; }
    #chrono { font-size: 3em; text-align: center; margin: 20px 0; }
    .actions button { font-size: 1em; padding: 10px; margin: 5px; }
    .scoreboard { text-align: center; font-size: 1.5em; margin-bottom: 10px; }
    .history { background: white; padding: 10px; margin-top: 20px; max-height: 200px; overflow-y: auto; }
  </style>
</head>
<body>
  <h1>Feuille de Match Interactive</h1>
  <div id="chrono">00:00</div>
  <div class="scoreboard">
    Score A : <span id="scoreA">0</span> - <span id="scoreB">0</span> : Score B
  </div>

  <div class="actions">
    <button onclick="logAction('BUT A')">BUT A</button>
    <button onclick="logAction('BUT B')">BUT B</button>
    <button onclick="logAction('2 MIN A')">2 MIN A</button>
    <button onclick="logAction('2 MIN B')">2 MIN B</button>
    <button onclick="startTME()">TME</button>
    <button onclick="exportPDF()">Exporter PDF</button>
  </div>

  <div class="history" id="historique"></div>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js"></script>
  <script>
    let time = 0;
    let interval = setInterval(() => {
      time++;
      const min = String(Math.floor(time / 60)).padStart(2, '0');
      const sec = String(time % 60).padStart(2, '0');
      document.getElementById("chrono").textContent = min + ":" + sec;
    }, 1000);

    let scoreA = 0, scoreB = 0;

    function logAction(action) {
      const chrono = document.getElementById("chrono").textContent;
      const hist = document.getElementById("historique");
      const div = document.createElement("div");
      div.textContent = `[${chrono}] ${action}`;
      div.onclick = () => {
        if (confirm("Supprimer cette action ?")) {
          div.remove();
          if (action === "BUT A") updateScore("A", -1);
          if (action === "BUT B") updateScore("B", -1);
        }
      };
      hist.prepend(div);

      if (action === "BUT A") updateScore("A", 1);
      if (action === "BUT B") updateScore("B", 1);
    }

    function updateScore(team, val) {
      if (team === "A") {
        scoreA += val;
        document.getElementById("scoreA").textContent = scoreA;
      } else {
        scoreB += val;
        document.getElementById("scoreB").textContent = scoreB;
      }
    }

    function startTME() {
      const team = prompt("TME pour quelle équipe ? (A ou B)").toUpperCase();
      if (team === "A" || team === "B") {
        logAction(`TME Équipe ${team}`);
      }
    }

    function exportPDF() {
      html2pdf().from(document.body).save('feuille-de-match.pdf');
    }
  </script>
</body>
</html>
